version: '3'

services: 
    drone-server:
        image: drone/drone:1
        ports: 
            - ${LISTEN}:80
        environment: 
            DRONE_GITHUB_CLIENT_ID: ${DRONE_GITHUB_CLIENT_ID}
            DRONE_GITHUB_CLIENT_SECRET: ${DRONE_GITHUB_CLIENT_SECRET}
            DRONE_RPC_SECRET: ${DRONE_RPC_SECRET}
            DRONE_SERVER_HOST: ${DRONE_SERVER_HOST}
            DRONE_SERVER_PROTO: ${DRONE_SERVER_PROTO}
            DRONE_USER_CREATE: username:grsky360,admin:true
            DRONE_USER_FILTER: grsky360
        volumes: 
            - drone_data:/data
        restart: always

volumes: 
    drone_data:
